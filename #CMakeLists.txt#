cmake_minimum_required(VERSION 3.13 FATAL_ERROR)

include(${CMAKE_ROOT}/Modules/ExternalProject.cmake)

project(mormon LANGUAGES CXX C Fortran)

set(CMAKE_CXX_STANDARD 17)

find_package(Python 3.6 REQUIRED COMPONENTS Interpreter Development)

enable_testing()

add_subdirectory(src)

add_executable(ran2_test tests/ran2_test.cpp)
target_link_libraries(ran2.test PRIVATE random)

add_test(
	NAME python_ewald3d_energy_test
	COMMAND ${Python_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/tests/ewald3d_energy_test.py --checkpoint ${CMAKE_CURRENT_SOURCE_DIR}/tests/ewald_test.cp
)

add_test(
        NAME python_halfwald_energy_test
        COMMAND ${Python_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/tests/hw_energy_test.py --checkpoint ${CMAKE_CURRENT_SOURCE_DIR}/tests/hw_energy_test.cp
)


